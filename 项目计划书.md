好的，明白了。我们需要交付两个版本：

1.  **桌面应用程序版**：使用Electron等技术打包，生成Windows（.exe）和Mac（.dmg）下双击即可运行的独立程序。
2.  **浏览器版**：一个.zip压缩包，用户解压后，里面会有一个清晰命名的文件，比如“双击这里开始.html”。

同时，所有的配套文档，特别是“部署指南”或“使用说明”，都将以**零技术背景**的用户为目标读者来编写。我们会用最直白、最简单的语言，配上截图，一步步地指导用户如何打开和使用这个工具，确保任何人都能轻松上手。

（合上笔记本，面带微笑）

非常感谢您！这次会议的效率和深度远超我的预期。感谢您提供了如此清晰的愿景和具体的需求，并且在讨论中贡献了大量宝贵的想法。我们从宏观架构聊到了最细微的交互细节，现在我对“DND战斗辅助工具网站（本地版）V2.0”这个项目已经有了一个非常全面和深刻的理解。

我们今天达成的共识，为项目的成功奠定了坚实的基础。

接下来，我会根据我们今天的讨论，为您整理一份详细的**《需求澄清纪要》**。其中会包含所有我们确认的需求点、设计决策、核心算法逻辑以及待办事项。稍后我会将这份文档通过邮件发送给您，以书面形式再次确认我们的理解完全一致。

再次感谢您的时间和投入，我非常期待能把我们共同构想的这个优秀工具变为现实！

---
---

（对话结束，开始生成纪要）

好的，现在我将为您生成本次会议的《需求澄清纪要》。

### **《DND战斗辅助工具网站（本地版）V2.0 - 需求澄清纪要》**

**会议日期:** 2025年8月22日
**项目名称:** DND战斗辅助工具网站（本地版）V2.0
**与会人员:** 客户, Alex (项目经理/技术负责人)
**会议目标:** 深入澄清并细化WBS中的各项需求，形成可执行的产品方案。

---

#### **一、 项目核心目标与愿景**

*   **核心痛点:** 解决线下跑团时，DM在处理过多战斗单位时，记录与计算繁琐，影响游戏节奏的问题。
*   **核心目标:** 打造一款DM专用的“数字副驾”，将战斗中的追踪、计算工作自动化，解放DM的精力，使其能专注于叙事和扮演。
*   **使用场景:** 线下跑团的战斗流程管理及战斗相关资料的快速查询与编辑。

#### **二、 整体架构与技术栈 (基于1.0)**

*   **核心架构:** 确认项目为**纯前端、纯本地化**应用。无任何后端服务器需求。
*   **技术栈:**
    *   **前端框架:** Vue.js
    *   **本地存储:** Dexie.js (基于IndexedDB)，用于在用户浏览器中持久化存储所有数据。
*   **数据归属:** 所有数据（怪物库、角色库、战役等）100%存储于用户本地设备，确保离线可用性和数据私密性。

#### **三、 UI/UX 设计 (基于1.3)**

*   **整体风格:** 采用类似 D&D Beyond 的**简约、现代化**设计风格，注重信息清晰、操作直观。
*   **核心页面布局:**
    *   **怪物库列表页:** 以卡片或列表形式展示，每项包含**怪物小图像、怪物名称、挑战等级(CR)**。
    *   **怪物详情页/编辑器:**
        *   布局参考官方《怪物图鉴》，展示全部怪物数据。
        *   提供强大的**“魔改”功能**：
            *   **非破坏性编辑:** 所有修改均创建为“新的自定义怪物”，不影响原始数据。
            *   **精准微调:** 允许用户直接修改任意数值或增删能力/动作。
            *   **CR一键调整:** 用户输入目标CR，系统根据预设规则表，自动调整新怪物的核心攻防数值（HP, AC, 攻击加值, 伤害/轮, 豁免DC），其中范围数值（HP、伤害）将在此区间内随机生成。伤害骰将根据“伤害/轮”的目标值进行智能反算调整。
    *   **PC角色卡:** 采用**战斗核心数据简化版**，非完整复刻版。
    *   **战斗主界面 (三区布局):**
        *   **顶部区域 (占20%):** 横向**先攻序列条**。
        *   **下方左侧 (50%):** **当前行动者详情面板**。
        *   **下方右侧 (50%):** **战场总览面板**。

#### **四、 数据与逻辑核心 (基于原2.0)**

*   **数据创建与管理:**
    *   **怪物创建字段:** 包含名称, HP, AC, 速度, 六大属性, 抗性, 易伤, 免疫 (伤害/状态), 特殊能力, 动作, 附赠动作, 反应, 传说动作。
    *   **怪物库筛选:** 必须支持**按名称搜索、按CR筛选、按怪物类型（多选）筛选**。
    *   **能力池:** 创建一个独立的“特殊能力库”，允许DM预设或自定义能力（如“再生”），在创建/编辑怪物时可以像“贴标签”一样快速添加。
    *   **PC角色库:** 创建一个独立的“PC角色库”用于存储和管理玩家角色。战斗前，DM可从中挑选PC加入战斗。
*   **核心算法:**
    *   **智能CR调整算法:** 纯粹的“数值转换器”，DM输入目标CR，算法根据规则表机械地转换并生成新怪物，不涉及遭遇平衡建议。
    *   **自动化攻击流程 (DM专用):**
        *   **支持多选目标**以应对AOE场景。
        *   **攻击检定类动作:**
            1.  DM选择动作和目标(可多选)。
            2.  系统自动投掷d20+调整值，并从PC数据中获取AC，直接判断并显示“命中/未命中/重击”，如果d20投掷出20则自动重击。
            3.  支持“无/优势/劣势”三种投骰模式。
            4.  重击时，伤害骰自动翻倍。
            5.  伤害结果需清晰展示数值和类型。
        *   **豁免检定类动作:**
            1.  DM选择动作和目标(可多选)。
            2.  系统弹出提示窗口，明确告知豁免DC和属性，并为每个目标窗口添加标题以作区分。
            3.  DM根据玩家线下投骰结果，点击“成功”或“失败”按钮。
            4.  系统根据结果自动结算伤害（如半伤/全伤）和施加的状态。
*   **数据导入/导出:**
    *   采用 **JSON** 文件格式进行全量数据的导入与导出，用于备份和恢复。

#### **五、 前端交互细节 (基于3.0)**

*   **先攻序列条:**
    *   可拖拽调整顺序。
    *   每个单位显示：头像/名称, 先攻值, **HP数值 (格式: 当前/最大)**, **状态图标**。
*   **当前行动者详情面板:**
    *   顶部醒目展示：名称, HP, AC, **六大属性及其调整值**。
    *   下方清晰列出可点击的动作/能力按钮。
*   **战场总览面板:**
    *   支持队伍的手动分组与命名，同名怪物默认自动成组。
    *   可作为快速**攻击目标选择器**使用。
*   **HP修改计算器:**
    *   提供手动输入。
    *   提供快捷按钮：**“半伤”、“双倍”、“治疗”**。
*   **状态施加与管理:**
    *   通过点击“+”号图标，从列表中选择状态进行施加。
    *   施加状态时，需支持DM**手动输入持续的回合数**。
    *   系统**自动追踪**状态持续时间，到期后**自动移除**。
    *   DM可随时**手动移除**或修改状态时长。

#### **六、 测试、打包与交付 (基于4.0)**

*   **验收标准:** **无运行Bug，整体运行流畅，100%实现本纪要中描述的所有功能。**
*   **交付成果:**
    *   **桌面应用程序版:** 提供Windows (.exe) 和 Mac (.dmg) 的独立可执行程序。
    *   **浏览器版:** 提供一个.zip压缩包，解压后可直接在浏览器中打开使用。
*   **文档:**
    *   提供部署和使用指南。
    *   所有文档将以**完全没有技术背景的用户**为目标读者进行编写，确保简单易懂。